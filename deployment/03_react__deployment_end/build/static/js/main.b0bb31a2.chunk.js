(this.webpackJsonppirate_react_hooks=this.webpackJsonppirate_react_hooks||[]).push([[0],{26:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(1),r=n.n(a),c=n(17),s=n.n(c),j=(n(26),n(7)),o=n(2),l=function(e){return Object(i.jsxs)("header",{children:[Object(i.jsx)("img",{src:"/images/pirtate-flag.jpg",alt:"Logo"}),Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{className:"navLink",children:Object(i.jsx)("a",{href:"/pirates",children:"Pirates"})}),Object(i.jsx)("li",{className:"navLink",children:Object(i.jsx)("a",{href:"/pirates/new",children:"Create Pirate"})}),Object(i.jsx)("li",{className:"navLink",children:Object(i.jsx)("a",{href:"/ships",children:"Ships"})}),Object(i.jsx)("li",{className:"navLink",children:Object(i.jsx)("a",{href:"/raids",children:"Raids"})})]})]})},u=n(9),d=function(e){var t=e.pirate;if(!t)return"Loading...";var n="/pirates/"+t.id;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(j.b,{to:n,className:"name",children:[t.firstName," ",t.lastName]}),Object(i.jsxs)("p",{children:["Age: ",t.age]}),Object(i.jsxs)("p",{children:["Ship: ",t.ship.name]})]})},p=function(e){var t=e.pirates;if(0===t.length)return Object(i.jsx)("p",{children:"Loading..."});var n=t.map((function(e,t){return Object(i.jsx)("li",{className:"component-item",children:Object(i.jsx)("div",{className:"component",children:Object(i.jsx)(d,{pirate:e})})},t)}));return Object(i.jsx)("ul",{className:"component-list",children:n})},h=n(10),b=function(e){var t=e.pirate,n=e.raids,a=e.onDelete,r=e.onUpdate;if(!t)return"Loading...";var c=t.raids.map((function(e,n){return Object(i.jsxs)("li",{children:[e.location,Object(i.jsx)("button",{onClick:function(){return e=n,Object(h.a)({},t).raids.splice(e,1),void r(t);var e},children:"Delete"})]},n)})),s="/pirates/"+t.id+"/edit",o=n.map((function(e,n){return function(e){return t.raids.some((function(t){return e.id===t.id}))}(e)?null:Object(i.jsx)("option",{value:n,children:e.location},n)}));return Object(i.jsxs)("div",{className:"component",children:[Object(i.jsx)(d,{pirate:t}),Object(i.jsx)("p",{children:"Raids:"}),Object(i.jsx)("ul",{children:c}),Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault();var i=parseInt(e.target.raids.value),a=n[i];t.raids.push(a),r(t)},children:[Object(i.jsx)("select",{name:"raids",children:o}),Object(i.jsx)("input",{type:"submit",value:"Add Raid"})]}),Object(i.jsxs)("button",{onClick:function(){a(t.id)},children:["Delete ",t.firstName]}),Object(i.jsx)(j.b,{to:s,children:Object(i.jsxs)("button",{type:"button",children:["Edit ",t.firstName]})})]})},f=function(e){var t=e.pirate,n=e.ships,r=e.onCreate,c=e.onUpdate,s=Object(a.useState)({firstName:"",lastName:"",age:0,ship:null}),j=Object(u.a)(s,2),o=j[0],l=j[1],d=function(e){var t=e.target.name,n=Object(h.a)({},o);n[t]=e.target.value,l(n)};Object(a.useEffect)((function(){!function(){if(t){var e=Object(h.a)({},t);l(e)}}()}),[t]);var p=n.map((function(e,t){return Object(i.jsx)("option",{value:t,children:e.name},t)})),b="";return b=t?"Edit "+t.firstName:"Create Pirate",0===!n.length?Object(i.jsx)("p",{children:"Loading..."}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h3",{children:b}),Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.id?c(o):r(o)},children:[Object(i.jsx)("input",{type:"text",placeholder:"First Name",name:"firstName",onChange:d,value:o.firstName}),Object(i.jsx)("input",{type:"text",placeholder:"Last Name",name:"lastName",onChange:d,value:o.lastName}),Object(i.jsx)("input",{type:"number",placeholder:"Age",name:"age",onChange:d,value:o.age}),Object(i.jsxs)("select",{name:"ship",onChange:function(e){var t=parseInt(e.target.value),i=n[t],a=Object(h.a)({},o);a.ship=i,l(a)},defaultValue:(t?n.findIndex((function(e){return t.ship.id===e.id})):null)||"select-ship",children:[Object(i.jsx)("option",{disabled:!0,value:"select-ship",children:"Select a ship"}),p]}),Object(i.jsx)("button",{type:"submit",children:"Save"})]})]})},O=n(19),x=n(20),m=function(){function e(){Object(O.a)(this,e),this.base="https://allyspirates.herokuapp.com"}return Object(x.a)(e,[{key:"get",value:function(e){return fetch(this.base+e).then((function(e){return e.json()}))}},{key:"delete",value:function(e){return fetch(this.base+e,{method:"DELETE",headers:{"Content-Type":"application/json"}})}},{key:"post",value:function(e,t){return fetch(this.base+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}},{key:"patch",value:function(e,t){return fetch(this.base+e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}}]),e}(),v=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(u.a)(c,2),l=s[0],d=s[1],h=Object(a.useState)([]),O=Object(u.a)(h,2),x=O[0],v=O[1],g=function(e){return n.find((function(t){return t.id===parseInt(e)}))},N=function(e){var t="/api/pirates/"+e;(new m).delete(t).then((function(){return window.location="/pirates"}))},y=function(e){(new m).post("/api/pirates",e).then((function(){return window.location="/pirates"}))},C=function(e){(new m).patch("/api/pirates/"+e.id,e).then((function(){window.location="/pirates/"+e.id}))};return Object(a.useEffect)((function(){!function(){var e=new m,t=e.get("/api/pirates"),n=e.get("/api/ships"),i=e.get("/api/raids");Promise.all([t,n,i]).then((function(e){r(e[0]),d(e[1]),v(e[2])}))}()}),[]),n?Object(i.jsx)(j.a,{children:Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(o.c,{children:[Object(i.jsx)(o.a,{exact:!0,path:"/pirates/new",render:function(){return Object(i.jsx)(f,{ships:l,onCreate:y})}}),Object(i.jsx)(o.a,{exact:!0,path:"/pirates/:id/edit",render:function(e){var t=e.match.params.id,n=g(t);return Object(i.jsx)(f,{pirate:n,ships:l,onUpdate:C})}}),Object(i.jsx)(o.a,{exact:!0,path:"/pirates/:id",render:function(e){var t=e.match.params.id,n=g(t);return Object(i.jsx)(b,{pirate:n,onDelete:N,onUpdate:C,raids:x})}}),Object(i.jsx)(o.a,{render:function(){return Object(i.jsx)(p,{pirates:n})}})]})})}):null},g=function(){return Object(i.jsx)(j.a,{children:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(l,{}),Object(i.jsx)(o.c,{children:Object(i.jsx)(o.a,{path:"/pirates",component:v})})]})})},N=function(){return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(g,{})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))};s.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(N,{})}),document.getElementById("root")),y()}},[[32,1,2]]]);
//# sourceMappingURL=main.b0bb31a2.chunk.js.map